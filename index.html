<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Wingo Analyzer ‚Äì Final Ultimate</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box;font-family:Roboto;-webkit-tap-highlight-color:transparent}
body{
margin:0;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:12px;
background:linear-gradient(-45deg,#0f2027,#203a43,#2c5364,#141e30,#243b55);
background-size:500% 500%;animation:bg 14s ease infinite;color:#fff
}
@keyframes bg{0%{background-position:0%}50%{background-position:100%}100%{background-position:0%}}
.page{
display:none;width:100%;max-width:500px;padding:22px;border-radius:22px;
background:rgba(255,255,255,.15);backdrop-filter:blur(18px);
border:1px solid rgba(255,255,255,.25);box-shadow:0 20px 40px rgba(0,0,0,.45)
}
.page.show{display:block}
h2{text-align:center;text-shadow:0 0 8px cyan}
input,button,select{
width:100%;padding:12px;margin-top:10px;border-radius:14px;border:none;font-size:15px
}
input{background:#fff}
button{font-weight:600;cursor:pointer}
.btn-primary{background:linear-gradient(135deg,#00c6ff,#0072ff);color:#fff}
.btn-secondary{background:linear-gradient(135deg,#555,#222);color:#fff}
.center{text-align:center;margin-top:8px}
.toggle{position:absolute;right:12px;top:50%;transform:translateY(-50%);cursor:pointer;font-size:13px;color:#000}
.server-btn{
height:60px;border-radius:50px;font-size:18px;margin-top:16px;
display:flex;align-items:center;justify-content:center;color:#fff
}
.hgzy{background:linear-gradient(135deg,#00f260,#0575e6)}
.dkwin{background:linear-gradient(135deg,#f7971e,#ffd200)}
.stat{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:12px}
.stat div{background:#fff;color:#000;padding:8px;border-radius:10px;text-align:center;font-weight:600}
.bar{height:18px;border-radius:10px;margin-top:6px}
.win{background:#38a169}
.loss{background:#e53e3e}
#history{max-height:140px;overflow:auto;margin-top:10px}
#history div{padding:6px;border-radius:8px;color:#fff;margin-bottom:6px;text-align:center}
.card{background:rgba(255,255,255,.9);border-radius:12px;padding:10px;margin-top:10px;font-size:14px;color:#000}
#timer{color:#ffeb3b;font-weight:bold;text-align:center;margin-top:6px}
</style>
</head>

<body>

<!-- LOGIN -->
<div class="page show" id="pLogin">
<h2>Login</h2>
<input id="liUser" placeholder="Username or Mobile">
<div style="position:relative">
<input id="liPass" type="password" placeholder="Password">
<span class="toggle" onclick="togglePass('liPass',this)">Show</span>
</div>
<button class="btn-primary" onclick="login()">Login</button>
<button class="btn-secondary" onclick="go('pSignup')">Signup</button>
<p id="msgL" class="center"></p>
</div>

<!-- SIGNUP -->
<div class="page" id="pSignup">
<h2>Signup</h2>
<input id="suName" placeholder="Full Name">
<input id="suUser" placeholder="Username">
<input id="suEmail" placeholder="Email">
<input id="suMobile" placeholder="Mobile">
<div style="position:relative">
<input id="suPass" type="password" placeholder="Password">
<span class="toggle" onclick="togglePass('suPass',this)">Show</span>
</div>
<div style="position:relative">
<input id="suCPass" type="password" placeholder="Confirm Password">
<span class="toggle" onclick="togglePass('suCPass',this)">Show</span>
</div>
<button class="btn-primary" onclick="signup()">Signup</button>
<button class="btn-secondary" onclick="go('pLogin')">Back</button>
<p id="msgS" class="center"></p>
</div>

<!-- ADMIN -->
<div class="page" id="pAdmin">
<h2>üîê Super Admin Panel</h2>
<input id="adminPin" placeholder="Admin PIN">
<button class="btn-primary" onclick="loginAdmin()">Enter</button>

<div id="adminBox" style="display:none">
<div class="card">
<b>‚è± Lock Time</b>
<input id="lockInput" type="number">
<button class="btn-primary" onclick="saveLock()">Save</button>
</div>

<div class="card">
<b>üéØ Bias Mode</b>
<select id="biasSelect">
<option value="neutral">Neutral</option>
<option value="softBig">Soft Big</option>
<option value="softSmall">Soft Small</option>
</select>
<button class="btn-primary" onclick="saveBias()">Apply</button>
<p id="biasTxt"></p>
</div>

<div class="card">
<b>üîÅ Bias Auto Shift</b>
<button class="btn-primary" onclick="toggleAuto()">Toggle</button>
<p id="autoTxt"></p>
</div>

<div class="card">
<b>üìú Bias History</b>
<div id="biasHistory"></div>
</div>

<div class="card">
<b>üßπ Factory Reset</b>
<button class="btn-secondary" onclick="factoryReset()">RESET ALL</button>
</div>
</div>

<button class="btn-secondary" onclick="go('pServer')">Exit</button>
</div>

<!-- SERVER -->
<div class="page" id="pServer">
<h2>Select Server</h2>
<button class="server-btn hgzy" onclick="selectServer('HGZY')">HGZY SERVER</button>
<button class="server-btn dkwin" onclick="selectServer('DKWIN')">DKWIN SERVER</button>
<button class="btn-secondary" onclick="go('pAdmin')">Admin</button>
<button class="btn-secondary" onclick="go('pLogin')">Logout</button>
</div>

<!-- RESULT -->
<div class="page" id="pResult">
<h2 id="serverTitle"></h2>
<input id="num" maxlength="1" placeholder="Enter 0‚Äì9">
<button id="btnResult" class="btn-primary" onclick="showResult()">Show Result</button>

<div id="resultText" class="center"></div>
<div id="timer"></div>

<div class="stat">
<div id="wC">Win: 0</div>
<div id="lC">Loss: 0</div>
<div id="wP">Win %: 0%</div>
<div id="lP">Loss %: 0%</div>
</div>

<div class="bar win" id="winBar"></div>
<div class="bar loss" id="lossBar"></div>

<button class="btn-primary" onclick="addResult('Win')">Win</button>
<button class="btn-secondary" onclick="addResult('Loss')">Loss</button>

<div class="center" id="streakText"></div>

<div class="card"><b>üìä Probability</b><br>
Small: <span id="pS">50%</span> | Big: <span id="pB">50%</span>
</div>

<div class="card"><b>üîÅ Last 6 Bias:</b> <span id="biasText">Neutral</span></div>
<div class="card"><b>üß™ Fairness:</b> <span id="fairText">N/A</span></div>

<div id="history"></div>

<button class="btn-secondary" onclick="clearHistory()">Clear</button>
<button class="btn-secondary" onclick="go('pServer')">Back</button>
</div>

<script>
/* ===== CORE ===== */
let data=JSON.parse(localStorage.getItem("serverData"))||{};
let server="",lock=false;
let lockTime=+localStorage.getItem("lockTime")||15;
let bias=localStorage.getItem("bias")||"neutral";
let autoShift=localStorage.getItem("autoShift")==="true";
let biasLog=JSON.parse(localStorage.getItem("biasLog")||"[]");
let streak=JSON.parse(localStorage.getItem("streak")||'{"w":0,"l":0}');
let ADMIN_PIN=localStorage.getItem("ADMIN_PIN")||"1234";

/* UTIL */
function go(id){document.querySelectorAll(".page").forEach(p=>p.classList.remove("show"));document.getElementById(id).classList.add("show")}
function togglePass(id,e){let i=document.getElementById(id);i.type=i.type==="password"?"text":"password";e.innerText=i.type==="password"?"Show":"Hide"}

/* AUTH */
function signup(){if(suPass.value!==suCPass.value){msgS.innerText="Password mismatch";return;}
localStorage.setItem("user",JSON.stringify({name:suName.value,user:suUser.value,email:suEmail.value,mobile:suMobile.value,pass:suPass.value}));
msgS.innerText="Signup success";setTimeout(()=>go('pLogin'),600)}
function login(){let u=JSON.parse(localStorage.getItem("user"));if(!u){msgL.innerText="Signup first";return;}
if((liUser.value===u.user||liUser.value===u.mobile)&&liPass.value===u.pass){go('pServer')}else msgL.innerText="Wrong info"}

/* ADMIN */
function loginAdmin(){if(adminPin.value===ADMIN_PIN){adminBox.style.display="block";lockInput.value=lockTime;biasSelect.value=bias;renderBiasUI()}else alert("Wrong PIN")}
function saveLock(){lockTime=+lockInput.value||15;localStorage.setItem("lockTime",lockTime)}
function saveBias(){bias=biasSelect.value;localStorage.setItem("bias",bias);saveBiasLog(bias);renderBiasUI()}
function toggleAuto(){autoShift=!autoShift;localStorage.setItem("autoShift",autoShift);renderBiasUI()}
function saveBiasLog(b){biasLog.push(b+" @"+new Date().toLocaleTimeString());biasLog=biasLog.slice(-20);localStorage.setItem("biasLog",JSON.stringify(biasLog))}
function factoryReset(){if(confirm("RESET ALL?")){localStorage.clear();location.reload()}}

/* RESULT */
function selectServer(s){server=s;if(!data[s])data[s]=[];serverTitle.innerText=s+" SERVER";go('pResult');render()}
function biasedResult(){let r=Math.random();if(bias==="softBig")return r<0.6?"Big":"Small";if(bias==="softSmall")return r<0.6?"Small":"Big";return r<0.5?"Small":"Big"}
function showResult(){if(lock)return;if(num.value===""||num.value<0||num.value>9){alert("0-9 ‡¶¶‡¶ø‡¶®");return;}
resultText.innerText="Result: "+biasedResult();lockButtons(true);startLock()}
function lockButtons(s){btnResult.disabled=s;num.disabled=s}
function startLock(){lock=true;let t=lockTime;timer.innerText="Wait: "+t+"s";
let i=setInterval(()=>{t--;timer.innerText="Wait: "+t+"s";if(t<=0){clearInterval(i);lock=false;timer.innerText="";lockButtons(false)}},1000)}
function addResult(v){data[server].unshift(v);updateStreak(v);localStorage.setItem("serverData",JSON.stringify(data));render()}
function clearHistory(){if(confirm("Clear history?")){data[server]=[];localStorage.setItem("serverData",JSON.stringify(data));render()}}

/* RENDER */
function render(){
let h=data[server]||[];
history.innerHTML=h.map(x=>`<div style="background:${x==='Win'?'#38a169':'#e53e3e'}">${x}</div>`).join("");
let w=h.filter(x=>x==="Win").length,l=h.filter(x=>x==="Loss").length,t=w+l;
wC.innerText="Win: "+w;lC.innerText="Loss: "+l;
wP.innerText="Win %: "+(t?(w/t*100).toFixed(1):0)+"%";
lP.innerText="Loss %: "+(t?(l/t*100).toFixed(1):0)+"%";
winBar.style.width=(t?(w/t*100):0)+"%";lossBar.style.width=(t?(l/t*100):0)+"%";
let s=50,b=50;if(h.length){s=50+(w-h.length/2);b=100-s}
pS.innerText=s.toFixed(1)+"%";pB.innerText=b.toFixed(1)+"%";
let last6=h.slice(0,6).filter(x=>x==="Win").length;
biasText.innerText=last6>3?"Win-biased":last6<3?"Loss-biased":"Neutral";
fairText.innerText=h.length<10?"N/A":(last6/h.length*100>65||last6/h.length*100<35?"Risky":"Fair")
}
function updateStreak(r){
if(r==="Win"){streak.w++;streak.l=0}else{streak.l++;streak.w=0}
if(autoShift){if(streak.w>=3)bias="softBig";else if(streak.l>=3)bias="softSmall";else bias="neutral";
localStorage.setItem("bias",bias);saveBiasLog(bias)}
localStorage.setItem("streak",JSON.stringify(streak))
}
function renderBiasUI(){
biasTxt.innerText="Current Bias: "+bias;
autoTxt.innerText="Auto Shift: "+(autoShift?"ON":"OFF");
biasHistory.innerHTML=biasLog.slice().reverse().map(x=>`<div>${x}</div>`).join("")
}
</script>

</body>
</html>
